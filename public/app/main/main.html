<div ng-if="main.login!=false">
	<div class="container">
		<div class="row">
			<div class="col-md-6">
				<div class="panel panel-default chat">
					<div class="panel-heading">
						<img ng-src="img/avatar/{{main.myAvatar}}" height="35" width="35" alt="{{main.login}}">
						<span style="padding-left:10px">{{main.login}}</span>
						</div> <!-- ./panel-heading -->
					<div scroll-bottom="main.messagelist" class="panel-body" style="height: 400px; overflow-y: auto; overflow-x: hidden;">

						<div ng-repeat="m in main.messagelist">
							<div ng-class="m.class">
								<div class="col-sm-1" ng-show="m.class == 'row chat-receive'"><img ng-src="img/avatar/{{m.avatar}}" height="35" width="35" alt="{{m.username}}"></div>
								<div ng-class="m.class == 'row chat-receive' ? 'col-sm-8 msg' : 'col-sm-8 col-sm-offset-4 msg'">

									<div class="msg-body">
										<div class="msg-user">{{m.username}}</div>
										<div ng-bind-html="main.toTrusted(m.message)"></div>
									</div>

									<div ng-class="m.class == 'row chat-receive' ? 'time' : 'time pull-right'">{{m.timeString}}</div>
								</div>
							</div>
						</div>

					</div>
					<div class="panel-footer">
						<form ng-submit="main.sendchat(main.chatmessage)">
							<div class="input-group">

								<div contenteditable id="chatInput" class="form-control" data-type="input" contenteditable="true" placeholder="Message..." ng-model="main.chatmessage">
								</div>

								<span class="input-group-btn dropup">
									<div class="btn-group">
										<button type="button" class="btn btn-default dropdown-toggle dropup" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="fa fa-lg fa-smile-o" aria-hidden="true" ng-click="main.toggleEmoji()" style="color: #555;"></i></button>
										<ul class="dropdown-menu dropdown-menu-right" >
											<li style="padding: 0 4px;">
												<table>
													<tr>
														<td ng-repeat="cat in main.emojiCat" style="padding: 5px;">
															<img ng-src="img/emoji/category/{{main.thisEmoji == cat.name ? cat.name+'2' : cat.name}}.png" height="24" width="24" alt="{{cat.label}}" ng-click="main.setEmoji({{cat.name}}); $event.stopPropagation();">
														</td>
														





														<!-- <td style="padding: 5px;"><img ng-src="img/emoji/category/{{main.thisEmoji == 'people' ? 'people2' : 'people'}}.png" height="24" width="24" alt="Smileys and People" ng-click="main.setEmoji('people'); $event.stopPropagation();"></td>
														<td style="padding: 5px;"><img ng-src="img/emoji/category/{{main.thisEmoji == 'nature' ? 'nature2' : 'nature'}}.png" height="24" width="24" alt="Nature" ng-click="main.getEmoji('nature'); $event.stopPropagation();"></td>
														<td style="padding: 5px;"><img ng-src="img/emoji/category/{{main.thisEmoji == 'foods' ? 'foods2' : 'foods'}}.png" height="24" width="24" alt="Foods" ng-click="main.getEmoji('foods'); $event.stopPropagation();"></td>
														<td style="padding: 5px;"><img ng-src="img/emoji/category/{{main.thisEmoji == 'places' ? 'places2' : 'places'}}.png" height="24" width="24" alt="Places" ng-click="main.getEmoji('places'); $event.stopPropagation();"></td>
														<td style="padding: 5px;"><img ng-src="img/emoji/category/{{main.thisEmoji == 'activity' ? 'activity2' : 'activity'}}.png" height="24" width="24" alt="Activity" ng-click="main.getEmoji('activity'); $event.stopPropagation();"></td>
														<td style="padding: 5px;"><img ng-src="img/emoji/category/{{main.thisEmoji == 'objects' ? 'objects2' : 'objects'}}.png" height="24" width="24" alt="Objects" ng-click="main.getEmoji('objects'); $event.stopPropagation();"></td>
														<td style="padding: 5px;"><img ng-src="img/emoji/category/{{main.thisEmoji == 'symbols' ? 'symbols2' : 'symbols'}}.png" height="24" width="24" alt="Symbols" ng-click="main.getEmoji('symbols'); $event.stopPropagation();"></td>
														<td style="padding: 5px;"><img ng-src="img/emoji/category/{{main.thisEmoji == 'flags' ? 'flags2' : 'flags'}}.png" height="24" width="24" alt="Flags" ng-click="main.getEmoji('flags'); $event.stopPropagation();"></td> -->
													</tr>
												</table>
											</li>
											<li style="padding: 0 4px; height: 175px; overflow-y: scroll; overflow-x: hidden;">
												<table>
													<tr ng-repeat="row in main.emojiList">
														<td ng-repeat="e in row" style="padding: 5px;"><a href="" ng-click="main.select_emoji(e)" ng-bind-html="main.emoji_img(e)"></td>
													</tr>
												</table>
											</li>
										</ul>
									</div>
									<button class="btn btn-default" type="submit"><i class="fa fa-chevron-right" aria-hidden="true"></i></button>
								</span>
							</div><!-- /input-group -->
						</form>
					</div>
				</div>
			</div><!-- /.col-md-6 -->
		</div><!-- /.row -->
	</div>
</div>